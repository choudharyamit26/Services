{% extends 'base.html' %}
{% block body %}
<section class="demandRight boxs">
    <div class="content-wrapper">
        {% if messages %}
        {% for message in messages %}
        <div class="alert alert-success alert-dismissible fade show" role="alert">
            {{ message }}
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        {% endfor %}
        {% endif %}
    </div>
    <div class="demandInner boxs">
        <h2 class="main">User Management</h2>
        <div class="tableList boxs bgWhite">
            <div class="scrollAll">
                <table id="example" class="table table-striped table-bordered" style="width:100%">
                    <thead>
                    <tr>
                        <th>S.No</th>
                        <th>User Id</th>
                        <th>Name</th>
                        <th>Country code</th>
                        <th>Phone No.</th>
                        <th>Email</th>
                        <th>Image</th>
                        <th>Password</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for user in object_list %}
                    <tr>
                        <td>{{forloop.counter}}</td>
                        <td>{{user.id}}</td>
                        <td>{{user.user.full_name}}</td>
                        <td>{{user.country_code}}</td>
                        <td>{{user.phone_number}}</td>
                        <td>{{user.email}}</td>
                        <td><img src="{{user.image.url}}"></td>
                        <td>{{user.password}}</td>
                    </tr>
                    {% endfor %}
                    </tfoot>
                </table>
            </div>
        </div>
    </div>
</section>

<!-- Modal -->
<div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">

            <div class="modal-body">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h2 class="main">Block/UnBlock User</h2>
                <p class="head">Are you sure you want to Block/UnBlock this Member ?</p>
                <div id="object_id_placeholder_div">
                    <input hidden="true" id="object_id_placeholder_input" value="">
                </div>
                <ul class="allBtns">
                    <li>
                        <button id="modal_delete_button" class="btns">Block</button>
                    </li>
                    <li><a href="#0" class="btns">Unblock</a></li>
                </ul>
            </div>

        </div>

    </div>
</div>
<script>

$(document).ready(function () {
    $('.inbox').click(function (e) {
        console.log('clicked deleteButton')
        e.preventDefault();
//        $('.modal').addClass('show');
        var value = $(this).val();
        console.log("value",value)
        $("#object_id_placeholder_div").html(`<input hidden="true" id="object_id_placeholder_input" value="` + value + `">`)
    });
    $('.CloseModal').click(function (e) {
        e.preventDefault();
//        $('.modal').removeClass('show');
    });

    $("#modal_delete_button").click(function () {
        var object_id = $("#object_id_placeholder_input").val();
        console.log('Id ',object_id)
        var protocol = window.location.protocol
        var hostname = window.location.hostname
        var port = window.location.port
        var url = protocol + "//" + hostname + ":" + port + "/adminpanel" + "/block-user" + "/" + object_id + "/"
        alert(object_id)
        window.location.href = url
    });
});


</script>
{% endblock %}