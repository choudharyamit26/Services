{% extends 'base.html' %}
{% block body %}
<section class="demandRight boxs">
    <div class="content-wrapper">
        {% if messages %}
        {% for message in messages %}
        <div class="alert alert-success alert-dismissible fade show" role="alert">
            {{ message }}
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        {% endfor %}
        {% endif %}
    </div>
    <div class="demandInner boxs">
        <div class="AddService">
            <h2 class="main">Sub-Admin Management
            </h2>
            <a href="{% url 'adminpanel:add-sub-admin' %}" class="btns">Add SubAdmin</a>
        </div>
        <div class="tableList boxs bgWhite">
            <div class="scrollAll">
                <table id="example" class="table table-striped table-bordered" style="width:100%">
                    <thead>
                    <tr>
                        <th>S.No</th>
                        <th>User Id</th>
                        <th>Name</th>
                        <th>Email Id</th>
                        <th>Action</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for obj in object_list %}
                    <tr>
                        <td>{{forloop.counter}}</td>
                        <td>{{obj.id}}</td>
                        <td>{{obj.full_name}}</td>
                        <td>{{obj.email}}</td>
                        <th class="textCenter flexProp">
                            <a href="{% url 'adminpanel:sub-admin-detail' obj.id %}"><i class="fa fa-eye colorBlue"></i></a>
                            <button class="marginLR" data-toggle="modal" data-target="#myModal2" value="{{obj.id}}"><i
                                    class="fa fa-trash-alt colorBlue"></i></button>
                            <a href="{% url 'adminpanel:edit-sub-admin-detail' obj.id %}"><i
                                    class="fa fa-edit colorBlue"></i></a>
                        </th>
                    </tr>
                    {% endfor %}

                    </tfoot>
                </table>
            </div>
        </div>
    </div>
</section>

<!-- Modal -->
<div class="modal fade" id="myModal2" role="dialog">
    <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">

            <div class="modal-body">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h2 class="main">Delete Sub-Admin</h2>
                <div id="object_id_placeholder_div">
                    <input hidden="true" id="object_id_placeholder_input" value="">
                </div>
                <p class="head">Are you sure you want to delete this sub-admin ?</p>
                <ul class="allBtns">
                    <li>
                        <button id="modal_delete_button" class="btns">Yes</button>
                    </li>
                    <li><a href="#0" class="btns">No</a></li>
                </ul>
            </div>
        </div>
    </div>
</div>
<script>
 $(document).ready(function () {
    $('.marginLR').click(function (e) {
        console.log('clicked Block Button')
        e.preventDefault();
//      $('.modal').addClass('show');
        var value = $(this).val();
        console.log("value",value)
        $("#object_id_placeholder_div").html(`<input hidden="true" id="object_id_placeholder_input" value="` + value + `">`)
    });
    $('.CloseModal').click(function (e) {
        e.preventDefault();
//        $('.modal').removeClass('show');
    });

    $("#modal_delete_button").click(function () {
        var object_id = $("#object_id_placeholder_input").val();
        console.log('Id ',object_id)
        var protocol = window.location.protocol
        var hostname = window.location.hostname
        var port = window.location.port
        var url = protocol + "//" + hostname + ":" + port + "/adminpanel" + "/delete-sub-admin" + "/" + object_id + "/"
        window.location.href = url
    });
});

</script>
{% endblock body %}